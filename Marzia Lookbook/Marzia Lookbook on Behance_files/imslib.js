/*! imslib.js 1.7.1+5c3d024 */

!function(a){a.adobeid=function(a){"use strict";var b;return"object"==typeof window.adobeid?b=window.adobeid:window.opener&&window.opener.adobeid?b=window.opener.adobeid:(b=window.adobeid={},a.logErrorToConsoleInDebugMode("Missing window.adobeid, falling back to an empty object")),b},a.alertMessages=function(){"use strict";return{dev:{adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once."},user:{allow_pop_up_window:"The browser's pop-up blocker has stopped a window from opening. To be able to sign-in, please use the browser's UI (in the address bar) to allow the window to be opened. Thank you.",adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",network_error:"A network error has occurred. Are you connected to the internet?"}}},a.base32=function(a){"use strict";function b(a,b,c){var d=b-c.length;return d>0&&(c=new Array(d+1).join(a)+c),c}function c(a){return b("0",5,a.toString(2))}function d(b){if(b.length%8!==0)throw new Error("Data length is not a multiple of 8");a.each(b,function(a,b){if(!(b in h))throw new Error("Unknown encoded character "+b)});var c=!1;a.each(b,function(a,b){if("="!==b&&c)throw new Error("Found padding char in the middle of the string");"="===b&&(c=!0)})}function e(a){for(var b=a.length-1,c=0;"="===a[b];)++c,--b;return c}function f(b){if("string"!=typeof b)throw new Error("Data is not a string");var f=b.toLowerCase().split("");d(f);var g=e(f),i=[];a.each(f,function(a,b){i.push(c(h[b]))});var j=i.join("");return g>0&&(j=j.slice(0,-5*g)),j.length%8!==0&&(j=j.slice(0,-1*(j.length%8))),j}var g="abcdefghijklmnopqrstuvwxyz234567".split(""),h={"=":0};return a.each(g,function(a,b){h[b]=a}),{decodeToBitstring:f}},a.config=function(b,c,d){"use strict";function e(){var a=d.getThisScriptSrc(),b=/\bclient_id=([^&]+)\b/.exec(a);return b?b[1].split(","):[]}function f(){var a=d.getThisScriptSrc(),b=/\blocale=([^&]+)\b/.exec(a);return b?b[1]:""}function g(){return c.client_id?c.client_id instanceof Array?c.client_id[0]:c.client_id:(d.logToConsoleInDebugMode("Missing window.adobeid.client_id. Falling back to client_id from url. Please add client_id to window.adobeid"),e()[0])}function h(){return c.locale?c.locale:(d.logToConsoleInDebugMode("Missing window.adobeid.locale. Falling back to locale from url. Please add locale to window.adobeid"),f())}var i=e();return i&&0!==i.length||(i=c.client_id),{sloEnabled:!0,refreshSsoCookiesEnabled:!1,sunbreakScope:"acct_mgmt_webui",sunbreakScopeExpanded:"acct_mgmt_api,gnav,update_profile.address.mail_to,update_profile.dob,update_profile.email,update_profile.first_name,update_profile.industry,update_profile.job_function,update_profile.job_title,update_profile.last_name,update_profile.mrktPerm,update_profile.password,update_profile.phoneNumber,update_profile.phonetic_name,update_profile.preferred_languages,update_profile.screen_name,update_profile.secondary_email",locale:h(),client_id:g(),api:a.config.$$api(b,i,c)}},a.config.$$api=function(b,c,d){"use strict";var e=a.endpoints(b,d);c instanceof Array||(c=[c]);var f={version:{v1:"v1"}};for(var g in e)if(e.hasOwnProperty(g)){var h=e[g],i={name:h.name,endpoint:{}};f[g]=i;for(var j=0,k=c.length;j<k;++j){var l=c[j];i.endpoint[l]=h.endpoint}}return f},a.endpoints=function(a,b){"use strict";if(b=b||{},b.uses_slo||(b.uses_slo=!1),!a||!a.login||!a.services)throw new Error("Hosts are not defined or incomplete: "+JSON.stringify(a));var c={authorize:{name:"authorize",endpoint:a.login+"/authorize/v1"},avatar:{name:"avatar/download",endpoint:a.login+"/avatar/download"},check:{name:"check/token",endpoint:(b.uses_slo?a.login:a.services)+"/check/${ version }/token"},check_status:{name:"check/status",endpoint:(b.uses_slo?a.login:a.services)+"/check/v1/status"},logout:{name:"logout",endpoint:(b.uses_slo?a.login:a.services)+"/logout/v1"},logout_token:{name:"logout_token",endpoint:(b.uses_slo?a.login:a.services)+"/logout/v1/token"},profile:{name:"profile",endpoint:a.login+"/profile/v1"},validate_token:{name:"validate_token",endpoint:a.login+"/validate_token/v1"},userinfo:{name:"userinfo",endpoint:a.login+"/userinfo/v1"},fg_value:{name:"fg_value",endpoint:a.services+"/fg/value/v1"}};return c},a.events=function(a){"use strict";var b=function(){var b={};this.addEventListener=function(a,c){var d=b[a]||[];b[a]=d,d.push(c)},this.dispatchEvent=function(c,d){var e=b[c];if(e)for(var f={type:c,data:d},g=0,h=e.length;g<h;++g)a.callIfFunction(e[g],null,[f])}};return{EventTarget:b}},a.http=function(a){"use strict";var b=function(a){return JSON.stringify(a)},c=function(a){var c="",d=!0;for(var e in a)if(a.hasOwnProperty(e)&&void 0!==a[e]){var f,g=encodeURIComponent(e),h=a[e];f=null===h?"null":"object"==typeof h?encodeURIComponent(b(h)):encodeURIComponent(h),c+=(d?"":"&")+g+"="+f,d=!1}return c},d=function(a,b){if(a){var d=c(a);return d&&(d=b&&b.indexOf("?")!==-1?"&"+d:"?"+d),d}return""},e="_adobeIMSJSONPCallbacks",f=function(b,c,f){c=c||{};var g=window[e];g||(g=window[e]={});var h="_"+a.createRandomString();c.callback="window."+e+"."+h,b+=d(c,b);var i=document.createElement("script");i.src=b,i.async=!0,i.type="text/javascript";var j=a.getDocumentHead();g[h]=function(b){a.isDebugMode&&a.logToConsole("api call response: "+JSON.stringify(b)),f(!1,b),a.removeKeyFromObject(g,h)};var k=function(){j.removeChild(i)};a.addEventListener(i,"load",k),a.addEventListener(i,"error",function(){f(!0,null),k()}),j.appendChild(i)},g={POST:"POST",GET:"GET"},h={JSON:"application/json",URI:"application/x-www-form-urlencoded"},i=function(){return!!XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}(),j=function(a,b,c,d,e,f){var g=new XMLHttpRequest;if(g.onreadystatechange=function(){g.readyState===g.DONE&&f(g.status,g.responseText,g)},g.open(a.toUpperCase(),b,!0),e)for(var h in e)e.hasOwnProperty(h)&&g.setRequestHeader(h,e[h]);g.withCredentials=d,g.send(c)},k=function(a,b,c,e){a+=d(c,a),j(g.GET,a,null,!0,b,e)},l=function(a,d,e,f,i){if(d=d||{},e){switch(f){case h.JSON:e=b(e);break;case h.URI:e=c(e);break;default:throw new Error("Unknown encoding "+f)}d["Content-Type"]=f}j(g.POST,a,e,!0,d,i)},m=function(a,b,c,d,e,f){switch(e=e||h.URI,a.toUpperCase()){case g.GET:k(b,c,d,f);break;case g.POST:l(b,c,d,e,f);break;default:throw new Error("Unknown HTTP method "+a)}};return{buildQueryString:d,jsonp:f,corsGet:k,corsPost:l,cors:m,corsSupported:i,Method:g,DataEncoding:h}},a.imsApis=function(a,b,c,d,e,f,g){"use strict";function h(a){E=a}function i(){"function"==typeof E&&E.apply(null,arguments)}function j(a){if(!(a&&a.name&&c.api_parameters))return{};for(var d in c.api_parameters)if(b.String_contains(a.name,d))return c.api_parameters[d];return{}}function k(a,b){if(b&&b.client_id)return b.client_id;var d=j(a);return d&&d.client_id?d.client_id:c.client_id?c.client_id instanceof Array?c.client_id[0]:c.client_id:f}function l(){return c.locale||g}function m(a,c,d){return 2!==arguments.length&&d||(d={}),d.client_id||(d.client_id=k()),b.applyExtraApiParameters(d,j(a),c)}function n(a,d){var e="AdobeID,openid";if(d&&d.scope)e=d.scope;else{var f=j(a);f&&f.scope?e=f.scope:c.scope&&(e=c.scope)}return b.String_withoutWhitespaces(e)}function o(a,c,d){d||(d=k(a));var e=a.endpoint[d];return e?(b.String_contains(e,"${ version }")?e=e.replace("${ version }",c||"v1"):c&&(e+="/"+c),e):(b.logToConsoleInDebugMode("No url found for api "+a.name+" for client "+d),"")}function p(b,c,d,e){!e&&d&&(e=d.client_id);var f=o(b,c,e);return f?f+a.buildQueryString(d,f):""}function q(){var b=!0;return c.optimizations&&"useCORS"in c.optimizations&&(b=Boolean(c.optimizations.useCORS)),a.corsSupported&&b}function r(c,d,e){var f=b.cloneObject(c.params)||{};f.client_id||(f.client_id=k(c.api));var g=o(c.api,c.apiVersion,f.client_id),h=c.method||a.Method.GET,i={};c.bearerToken&&(i[F.AUTHORIZATION]="Bearer "+c.bearerToken),i[F.X_IMS_CLIENT_ID]=f.client_id,a.cors(h,g,i,f,a.DataEncoding.URI,function(a,b,c){429===a?e({error:G.RATE_LIMITED,retryAfter:window.parseInt(c.getResponseHeader(F.RETRY_AFTER),10)}):b?(b=JSON.parse(b),b.error_flag||b.error?e(b):d(b)):e(null)})}function s(c,d,e){var f=b.cloneObject(c.params),g=o(c.api,c.apiVersion,f.client_id);c.bearerToken&&(f.bearer_token=c.bearerToken),a.jsonp(g,f,function(a,b){a||b.error_flag||b.error?e(b):d(b)})}function t(a,b,c){if(!a)throw new Error("No config object provided");if(!a.api)throw new Error("No `config.api` provided");c=c||i,q()?r(a,b,c):s(a,b,c)}function u(b,c,e){var f=m(d.validate_token,{token:b.access_token,client_id:b.client_id,typeof:"access_token"});t({api:d.validate_token,params:f,method:a.Method.POST},c,e)}function v(b,c,e){var f=m(d.logout_token,{access_token:b});e=e||i;var g=function(a){a&&a.error?e(a):c(a)};t({api:d.logout_token,method:a.Method.POST,params:f},g,g)}function w(a,b,e){var f=m(d.profile),g=c.openidCompatible?d.userinfo:d.profile;t({api:g,bearerToken:a,params:f},b,e)}function x(a,b){var c=m(d.check_status);t({api:d.check_status,params:c},a,b)}function y(b,c,e){b=m(d.check,b,{scope:n(),locale:l()});var f=function(a){a.jump?e(a):c(a)};q()?t({api:d.check,apiVersion:"v4",method:a.Method.POST,params:b},f,e):e({error:G.NO_CORS})}function z(a){return o(d.avatar)+"/"+a}function A(a){return a=m(d.authorize,a,{response_type:"token",client_id:k(),scope:n(),locale:l()}),p(d.authorize,null,a)}function B(a){return a=m(d.logout,a,{locale:l()}),p(d.logout,null,a)}function C(a){var b=8,c="";if(a.length%8!==0)throw new Error("Length must be a multiple of 8");for(var d=0,e=a.length;d<e;d+=b){var f=a.slice(d,d+b);c+=f.split("").reverse().join("")}return c}function D(a,c,f){var g=m(d.fg_value,{client_id:k(d.fg_value)});t({api:d.fg_value,params:g,bearerToken:a},function(a){a&&""!==a?c(a,C(e.decodeToBitstring(a.releaseFlags))):b.callIfFunction(f,null,[null])},f)}var E,F={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},G={NO_CORS:"no_cors",RATE_LIMITED:"rate_limited"},H={getApiUrlWithQuery:p,getApiUrl:o,makeApiCall:t,validateToken:u,checkStatus:x,checkToken:y,getProfile:w,logoutToken:v,getReleaseFlags:D,getAvatarUrl:z,getAuthorizeUrl:A,getLogoutUrl:B,apiEndpoints:d,getApiParameters:j,getClientId:k,getLocale:l,getScope:n,setGlobalErrorHandler:h,Errors:G};return H},a.adobeIMS=function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){return a?f.local:f.session}function k(){return f.session}function l(){return Boolean(b.optimizations&&b.optimizations.fastEvents)}function m(){var d=this;this.adobeid=b,!c.isDebugMode&&this.adobeid.uses_debug_mode&&(c.isDebugMode=!0),this._accessTokensInfos={},this._profile=null,this._is_already_attached_to_ui=!1,this._last_ui_update={_any_update_so_far:!1,_accessTokensInfos:{},_profile:null,update:function(){this._any_update_so_far=!0,this._accessTokensInfos=c.cloneObject(d._accessTokensInfos),this._profile=c.cloneObject(d._profile)},areThereUIUpdatesToPerformForAccessTokens:function(){return!this._any_update_so_far||!c.equals(this._accessTokensInfos,d._accessTokensInfos)},areThereUIUpdatesToPerformForProfile:function(){return!this._any_update_so_far||!c.equals(this._profile,d._profile)},areThereUIUpdatesToPerform:function(){return this.areThereUIUpdatesToPerformForProfile()||this.areThereUIUpdatesToPerformForAccessTokens()}},a.setGlobalErrorHandler(function(){d._onApiError.apply(d,arguments)})}function n(a,d){try{c.callIfFunction(b[a],b,d)}catch(b){this._onError(this.errors.jsException.setException(b,"adobeid."+a))}}function o(a){return Boolean(a&&"ride_AdobeID_acct_disabled"===a.error)}function p(b){return b.error===a.Errors.RATE_LIMITED}function q(a){return!a||!!(a.error||a.error_flag||a.error_description)}function r(a){a._invalidateTokens(c.Object_keys(a._accessTokensInfos),function(){a._clearCredentials({updateUI:!0}),a.signIn()})}function s(b,d,e){arguments.length<3&&(e=d,d=b.getAccessToken()),a.getProfile(d,function(a){b.setProfile(a),c.callIfFunction(e,b)},function(a){c.logErrorToConsoleInDebugMode("Failed to retrieve the profile "+a),p(a)?(t(a,b),c.callIfFunction(e,b)):o(a)?r(b):q(a)?(b._clearCredentials({updateUI:!0}),c.callIfFunction(e,b)):c.callIfFunction(e,b)})}function t(a,b){var c=b.errors.rateLimit.create(a.retryAfter,b.isSignedInUser());b._onError(c)}function u(a,b){G&&(G.closed||G.close(),G=null);var d=[];return c.each(c.Object_keys(b||{}),function(a,c){var e=b[c];e=e===!0?"yes":e===!1?"no":String(e),d.push(c+"="+e)}),G=c.openPopup(a,E,d.join(",")),G&&"function"==typeof G.focus&&G.focus(),G}function v(a,b){L.isRequired=a,L.url=b}function w(){return L}var x="adobeid_ims_access_token",y="/",z="adobeid_ims_profile",A="from_ims",B=A+"=true",C="rctx",D=b.popupPageName||"redirectims.html",E="_blank",F={sign_in:{width:500,height:630},sign_up:{width:500,height:800},sign_out:{width:320,height:240},jump:{width:500,height:800},any:{width:500,height:630}},G=null;if(window.adobeIMS)return c.logErrorToConsoleInDebugMode("adobeIMS already exists. Have you loaded the file twice?"),null;var H,I={PROFILE:"profile",ACCESS_TOKEN:"accesstoken",ACCESS_TOKEN_EXPIRED:"accesstokenexpired",READY:"ready",ERROR:"error"},J=new g.EventTarget,K=b.openidCompatible?"sub":"userId",L={isRequired:!1,url:null},M=null,N=null,O={Events:I,addEventListener:function(a,b){J.addEventListener(a,b)},IMSAPIs:{},errors:{network:{name:"networkError",userMessage:"Network error"},fromApiCallRedirect:{name:"fromApiCallRedirectError",userMessage:"",setMessage:function(a){return this.userMessage=a,this}},avatarPicture:{name:"avatarPictureError",userMessage:"current scopes won't retrieve the user_id"},jsException:{name:"jsExceptionError",message:"",exception:null,setException:function(a,b){return this.exception=a,this.message=b||"",this}},rateLimit:{name:"rate_limit",retryAfter:null,isUserSignedIn:null,create:function(a,b){return{name:this.name,retryAfter:a,isUserSignedIn:b}}}},getUrlForApiCall:function(b,c,d){return 2===arguments.length&&(d=arguments[1],c=null),a.getApiUrlWithQuery(b,c,d)},makeApiCall:function(b,c,d,e){return 3===arguments.length&&(e=arguments[2],d=arguments[1],c=null),a.makeApiCall({api:b,apiVersion:c,params:d,forceJsonp:!0},e)},_onApiError:function(a){var b=c.cloneObject(this.errors.network);b.debug={url:a},this._onError(b)},getUserProfile:function(){return this._profile},getUserPictureURL:function(){return this._profile?this._profile[K]?a.getAvatarUrl(this._profile[K]):(this._onError(this.errors.avatarPicture),""):""},getAccessTokenInfo:function(a,b,c){var d=this.getAccessTokenSessionStorageKey(a,b,c),e=this._accessTokensInfos[d];return e?j(e.isReAuthentication).getItem(d)?e:(this._clearCredentials({access_token:e.access_token}),null):null},getAccessToken:function(a,b,c){var d=this.getAccessTokenInfo(a,b,c);return d?d.access_token:null},getAccessTokenSessionStorageKey:function(a,b,c){return[x,b||this.getClientID(),Boolean(a),c||this.getScope()].join(y)},getKeyForAccessToken:function(a){for(var b in this._accessTokensInfos)if(a===this._accessTokensInfos[b].access_token)return b;return c.assert(!1,"unknown access_token for key: "+b),null},_isAccessTokenInfoUsable:function(a){return a&&"string"==typeof a.access_token&&"string"==typeof a.client_id&&this.isKnownClientID(a.client_id)&&"string"==typeof a.scope&&"boolean"==typeof a.isReAuthentication&&"number"==typeof a.expires_in&&"number"==typeof a.expiresAtMilliseconds&&c.Date_asMilliseconds()<a.expiresAtMilliseconds},loadFromStorage:function(){var a=this;this._accessTokensInfos={};var b=function(b){for(var d in b.keys?b.keys():b)if(c.String_startsWith(d,x))try{var e=c.parseJSON(b.getItem(d));if(!a.isKnownClientID(e.client_id))continue;a._isAccessTokenInfoUsable(e)?a._accessTokensInfos[d]=e:(c.logToConsoleInDebugMode("unusable access token info: "+b.getItem(d)),b.removeItem(d))}catch(a){b.removeItem(d)}};b(j(!1)),b(j(!0)),this._profile=c.parseJSON(k().getItem(z))},hasTokenButItHasExpired:function(a,b,d){var e=this.getAccessTokenInfo(a,b,d);return e&&c.Date_asMilliseconds()>e.expiresAtMilliseconds?e:void 0},isSignedInUser:function(a,b,d){var e=this.getAccessTokenInfo(a,b,d);return e&&c.Date_asMilliseconds()<e.expiresAtMilliseconds?e:void 0},signIn:function(b,d){this.contextToBePassedOnRedirect=d;var e=c.applyExtraApiParameters({},b);e.redirect_uri=this._getRedirectUri(i.api.authorize,e),this.version&&(e.jslibver=this.version);var f=a.getAuthorizeUrl(e);this.isModal()&&this._callCallbacksToUpdateUI(),this._openWindow(f,"create_account"===e.idp_flow?F.sign_up:F.sign_in)},reAuthenticate:function(a,b){var d=c.applyExtraApiParameters({reauth:"check",puser:this._profile&&this._profile.email?this._profile.email:void 0,eu:this._profile&&this._profile.email?"true":void 0},a);this.signIn(d,b)},isReAuthentication:function(a){return a&&a.reauth},updateRedirectUriForReAuthentication:function(a,b){return"string"==typeof a&&this.isReAuthentication(b)?(c.String_contains(a,"reauth=")||(a=a+"&reauth="+b.reauth),a):a},getContextFromRedirectForAccessToken:function(a){if(this.contextPassedFromRedirect&&this.contextPassedFromRedirect.access_token===a){var b=this.contextPassedFromRedirect.context;return this.contextPassedFromRedirect=null,b}return null},signUp:function(a,b){this.isModal()&&this._callCallbacksToUpdateUI(),this.signIn(c.applyExtraApiParameters({idp_flow:"create_account"},a),b)},_invalidateTokens:function(b,d){var e=this,f=b.length;f?c.each(b,function(b,g){a.logoutToken(e._accessTokensInfos[g].access_token,function(){--f,0===f&&c.callIfFunction(d)})}):c.callIfFunction(d)},signOut:function(b){function d(d){if(!d)return void e._clearCredentials({updateUI:!0});var f=c.applyExtraApiParameters(e.getAdobeIdApiParametersForApi(i.api.logout),b);e.isModal()&&f.redirect_uri&&e.switchToRedirectMode();var g=a.getLogoutUrl(c.applyExtraApiParameters({access_token:d.access_token,redirect_uri:e._getRedirectUri(e.config.api.logout,b)},f));e._clearCredentials({updateUI:!0}),e._openWindow(g,F.sign_out)}var e=this,f=c.Object_keys(this._accessTokensInfos);if(f.length){var g=this._accessTokensInfos[f.pop()];this._invalidateTokens(f,function(){d(g)})}else e._clearCredentials({updateUI:!0})},switchToRedirectMode:function(){this.adobeid.uses_modal_mode=!1,this.adobeid.uses_redirect_mode=!0},switchToModalMode:function(){this.adobeid.uses_modal_mode=!0,this.adobeid.uses_redirect_mode=!1},_clearCredentials:function(a){var b;if(a&&a.access_token)b=this.getKeyForAccessToken(a.access_token),j(!1).removeItem(b),j(!0).removeItem(b),c.removeKeyFromObject(this._accessTokensInfos,b);else{for(b in this._accessTokensInfos)if(c.String_startsWith(b,x)){var d=this._accessTokensInfos[b];j(d.isReAuthentication).removeItem(b)}this._accessTokensInfos={},k().removeItem(z),this._profile=null,this._clearTimerTestSSOCookieWillExpire()}a&&a.updateUI===!0&&this._callCallbacksToUpdateUI(a)},_callCallbacksToUpdateUI:function(a){if(this._last_ui_update.areThereUIUpdatesToPerform()){var b=c.cloneObject(this._last_ui_update);if(this._last_ui_update.update(),b.areThereUIUpdatesToPerformForProfile()&&J.dispatchEvent(I.PROFILE,{profile:this._profile}),b.areThereUIUpdatesToPerformForAccessTokens())if(a&&a.access_token){var d=this._accessTokensInfos[this.getKeyForAccessToken(a.access_token)];J.dispatchEvent(I.ACCESS_TOKEN,{accessTokenInfo:d})}else for(var e in this._accessTokensInfos)c.equals(this._accessTokensInfos[e],b._accessTokensInfos[e])||J.dispatchEvent(I.ACCESS_TOKEN,{accessTokenInfo:this._accessTokensInfos[e]})}},_onReady:function(){if(!this.onReadyAlreadyCalled){this.onReadyAlreadyCalled=!0,this._callCallbacksToUpdateUI();var a={};a.userActionInfo=w(),a.userActionInfo.isRequired?a.isUserSignedIn=!1:a.isUserSignedIn=Boolean(this.isSignedInUser()),J.dispatchEvent(I.READY,{signInState:a})}},isReady:function(){return!!this.onReadyAlreadyCalled},_onError:function(a){J.dispatchEvent(I.ERROR,{error:a}),"function"!=typeof this.adobeid.onError&&("string"==typeof a.userMessage?c.logToConsoleInDebugMode(a.userMessage):c.logErrorToConsoleInDebugMode("unhandled javascript error: "+JSON.stringify(a)),a.debug&&c.logToConsoleInDebugMode(JSON.stringify(a.debug)))},_update_url_ims_api:function(){if(this.adobeid.target_env){var a={replaceWhat:/https?:\/\/adobeid-na1-(dev|qa|stg)\d\.services\.adobe\.com/i,replaceWith:"https://adobeid-na1-"+this.adobeid.target_env+".services.adobe.com"},b={replaceWhat:/https?:\/\/ims-na1-(dev|qa|stg)\d\.adobelogin\.com/i,replaceWith:"https://ims-na1-"+this.adobeid.target_env+".adobelogin.com"},d=/https?:\/\/\S*\.corp\.adobe\.com(:\d*)?/i;for(var e in i.api){var f=i.api[e];if(!c.isEmptyObject(f.endpoint))for(var g in f.endpoint){var h=d.test(f.endpoint[g]);if(h){var j=c.String_contains(f.name,"check")||c.String_contains(f.name,"logout")?a:b;f.endpoint[g]=f.endpoint[g].replace(d,j.replaceWith)}else f.endpoint[g]=f.endpoint[g].replace(a.replaceWhat,a.replaceWith).replace(b.replaceWhat,b.replaceWith)}}c.isDebugMode&&(c.logToConsole("target_env = "+this.adobeid.target_env),c.logToConsole("authorize = "+i.api.authorize.endpoint[this.getClientID(i.api.authorize)]),c.logToConsole("check = "+i.api.check.endpoint[this.getClientID(i.api.check)]))}},_initialize:function(){var a=this;J.addEventListener(I.PROFILE,function(b){n.call(a,"onProfile",[b.data.profile])}),J.addEventListener(I.ACCESS_TOKEN,function(b){n.call(a,"onAccessToken",[b.data.accessTokenInfo.access_token,b.data.accessTokenInfo])}),J.addEventListener(I.READY,function(b){n.call(a,"onReady",[b.data.signInState])}),J.addEventListener(I.ERROR,function(a){c.callIfFunction(b.onError,b,[a.data.error])}),this._update_url_ims_api();var d=function(){a.isMandatorySignIn()&&!a.isSignedInUser()&&a.signIn()},e=function(){var b=c.cloneObject(a._accessTokensInfos||{}),e=function(){if(d(),a._callCallbacksToUpdateUI(),l()&&!a.isSignedInUser())for(var c in b)b.hasOwnProperty(c)&&b[c]&&J.dispatchEvent(I.ACCESS_TOKEN_EXPIRED,{accessTokenInfo:b[c]});a._onReady()};if(a.isSingleLogOutEnabled()||!a.isSignedInUser())a.signInBasedOnSingleSignOnSSO(function(b){"no_cors"===b&&a.isSignedInUser()?s(a,e):c.callIfFunction(e,a)});else{var f=a.getAccessToken();c.removeKeyFromObject(b,a.getKeyForAccessToken(f)),a.testAccessTokenIsStillValid(f,e)}};l()&&(J.addEventListener(I.ACCESS_TOKEN_EXPIRED,function(b){n.call(a,"onAccessTokenHasExpired",[b.data.accessTokenInfo.access_token,b.data.accessTokenInfo])}),this.loadFromStorage(),c.isEmptyObject(this._profile)||this._callCallbacksToUpdateUI()),this._signInWhenRedirectedBackFromIMS(function(){a._isFinalRedirectPageInModalMode()?window.opener&&(window.opener.adobeIMS._importDataFromModalWindow(a),c.closeWindow()):(a.loadFromStorage(),a.hasJustReturnedFromAuthorize?this.isSignedInUser()?a._testAccessTokensAreStillValid():a.signInBasedOnSingleSignOnSSO(function(){a._testAccessTokensAreStillValid()}):a.isSignedInUser(!0)?a.testAccessTokenIsStillValid(a.getAccessToken(!0),e):e())})},_signInWhenRedirectedBackFromIMS:function(a){var b=this,e=c.getHashFromURL().substring(1);e=e.replace("%23access_token","#access_token").replace("%23expires_in","#expires_in").replace("%23error","#error").replace("?error","#error").replace("#","&");var f=c.getQueryParamsAsMap(e),g=f.access_token,h=f.api;h===i.api.authorize.name&&c.assert(g,"the authorize api must return an access_token");var j=Boolean(f.reauth),k=f.client_id||this.getClientID(),l=f.scope||this.getScope(),m=f.expires_in,n="true"===f[A],o=f.error,p=f[C];try{H=JSON.parse(f.state)}catch(a){H=f.state}this.contextPassedFromRedirect=p?{context:c.parseJSON(p),access_token:g}:null;var q=g&&m||n&&h===i.api.logout.name||o&&n;return q?(d.setHash(f.old_hash||""),void(g?(this.hasJustReturnedFromAuthorize=!0,this._setAccessTokenAndGetProfile(g,j,k,l,m,null,function(){b.validateSSOCookieLifetime(g,a)})):(this._accessTokensInfos={},this._profile=null,o&&this._onError(this.errors.fromApiCallRedirect.setMessage(o)),a.call(this)))):void a.call(this)},getState:function(){return H||null},_setAccessTokenAndGetProfile:function(a,b,d,e,f,g,h){var i=this;f=Number(f);var k=g&&g[K];if(this._removeAccessTokensIfDifferentUserId(k),c.isEmptyObject(this._accessTokensInfos)&&this.loadFromStorage(),!this.shouldAcceptTheToken(a,d,e,k,!0,b))return void c.callIfFunction(h,i);var l=this.getAccessTokenSessionStorageKey(b,d,e),m=c.Date_asMilliseconds();this._accessTokensInfos[l]={access_token:a,client_id:d,user_id:k,scope:e,expires_in:f,createdAtMilliseconds:m,expiresAtMilliseconds:m+f,isReAuthentication:b},j(b).setItem(l,JSON.stringify(this._accessTokensInfos[l])),this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI(),g?c.callIfFunction(h,i):s(i,a,h)},setProfile:function(a,b){a&&!a.error_flag&&(this._profile=a,a?(k().setItem(z,JSON.stringify(this._profile)),this._removeAccessTokensIfDifferentUserId(a[K])):k().removeItem(z),!b&&this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI())},_removeAccessTokensIfDifferentUserId:function(a){if(a)for(var b in this._accessTokensInfos){var d=this._accessTokensInfos[b];d.user_id&&d.user_id!==a&&(this._clearCredentials({access_token:d.access_token,updateUI:!1}),c.isDebugMode&&c.logToConsole("remove token because of different user_id (isReAuthentication="+d.isReAuthentication+")"))}},_signInBasedOnStoredCredentials:function(a){this.loadFromStorage(),c.isEmptyObject(this._accessTokensInfos)?(this._clearCredentials(),c.callIfFunction(a,this)):this.hasJustReturnedFromAuthorize?(this.hasJustReturnedFromAuthorize=!1,c.callIfFunction(a)):this.testSingleLogOutSLO(a)},signInBasedOnSingleSignOnSSO:function(a){var b=this;this.acquireAccessToken(a,function(d){d=d||{},p(d)?(t(d,b),c.callIfFunction(a,b)):d.jump?(c.logToConsoleInDebugMode("jumping to "+d.jump),v(!0,d.jump),b.isModal()?b._clearCredentials():b._openWindow(d.jump,F.jump)):"ride_AdobeID_acct_evs"===d.error?(b._clearCredentials(),v(!0,null),b.isModal()||b.signIn()):"ride_AdobeID_acct_disabled"===d.error?b._invalidateTokens(c.Object_keys(b._accessTokensInfos),function(){b._clearCredentials({updateUI:!0}),v(!0,null),b.isModal()||b.signIn()}):"no_cors"===d.error?c.callIfFunction(a,b,["no_cors"]):(b._clearCredentials({updateUI:!0}),b.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(a,b))})},acquireAccessToken:function(b,d){var e=this,f={redirect_uri:this._getRedirectUri(a.apiEndpoints.check),client_id:this.getClientID(a.apiEndpoints.check),scope:this.getScope(a.apiEndpoints.check)};a.checkToken(f,function(a){var d=c.cloneObject(a);c.removeKeyFromObject(d,"access_token"),c.removeKeyFromObject(d,"expires_in"),c.removeKeyFromObject(d,"token_type"),e.setProfile(d),e._setAccessTokenAndGetProfile(a.access_token,!1,f.client_id,f.scope,a.expires_in,d,b)},d)},testSingleLogOutSLO:function(b){if(!this.isSingleLogOutEnabled())return void c.callIfFunction(b,this);var d=this;a.checkStatus(function(a){a.sso===!1&&a.remember_me===!1?(d._clearCredentials({updateUI:!0}),d.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(b,d)):d.signInBasedOnSingleSignOnSSO(b)})},validateSSOCookieLifetime:function(a,b){c.callIfFunction(b,this)},_clearTimerTestSSOCookieWillExpire:function(){this._timerTestSSOCookieWillExpire&&(clearInterval(this._timerTestSSOCookieWillExpire),this._timerTestSSOCookieWillExpire=null)},shouldAcceptTheToken:function(a,b,d,e,f,g){var h=!0,j=[{shouldReject:f===!1,shouldLogToErrorConsole:!1,message:"access_token is invalid."},{shouldReject:f===!0&&e&&this._profile&&e!==this._profile[K],shouldLogToErrorConsole:!1,message:"access_token was from another userId (isReAuthentication=#0).".replace("#0",g)},{shouldReject:f===!0&&!this.isKnownClientID(b),shouldLogToErrorConsole:!0,message:"the #0 client_id associated with the access token is not for a known client_id (#1).".replace("#0",b).replace("#1",Object.keys?Object.keys(i.api.authorize.endpoint).join(","):this.getClientID())},{shouldReject:f===!0&&!this.matchesTheRequiredScope(d),shouldLogToErrorConsole:!0,message:"the (#0) scope associated with the access token doesn't match the required scope (#1).".replace("#0",d).replace("#1",this.getScope())},{shouldReject:!a,shouldLogToErrorConsole:!0,message:"no access token."}];return c.each(j,function(a,b){b.shouldReject&&(h=!1,(b.shouldLogToErrorConsole?c.logErrorToConsoleInDebugMode:c.logToConsoleInDebugMode)("shouldAcceptTheToken: "+b.message))}),h},testAccessTokenIsStillValid:function(b,d){var e=this,f=this._accessTokensInfos[this.getKeyForAccessToken(b)];c.assert(f,"we need token information to validate it");var g=function(a){if(a.token&&e.shouldAcceptTheToken(b,a.token.client_id,a.token.scope,a.token.user_id,a.valid,f.isReAuthentication))d();else{c.logToConsoleInDebugMode("validate/token: access_token is invalid. removing."),e._clearCredentials({updateUI:e.onReadyAlreadyCalled,access_token:b});try{a.token&&e.isKnownClientID(a.token.client_id)&&e.matchesTheRequiredScope(a.token.scope)&&c.callIfFunction(e.adobeid.onAccessTokenHasExpired,e.adobeid,[b,f])}catch(a){e._onError(e.errors.jsException.setException(a,"adobeid.onAccessTokenHasExpired"))}f.isReAuthentication?d():e.signInBasedOnSingleSignOnSSO(function(){e.isSignedInUser()||e.isMandatorySignIn()&&e.signIn(),d()})}};f&&this.isKnownClientID(f.client_id)?a.validateToken(f,g):g({valid:!1})},_testAccessTokensAreStillValid:function(){var a,b=0;for(a in this._accessTokensInfos)++b;var c=this,d=function(){--b,0===b&&c._onReady()};if(b>0)for(a in this._accessTokensInfos)c.testAccessTokenIsStillValid(this._accessTokensInfos[a].access_token,d);else c._onReady()},_importDataFromModalWindow:function(a){if(c.isEmptyObject(a._accessTokensInfos))this._clearCredentials({updateUI:!0});else{this.contextPassedFromRedirect=c.cloneObject(a.contextPassedFromRedirect),H=a.getState(),c.equals(a._profile,this._profile)||c.isEmptyObject(a._profile)||this.setProfile(c.cloneObject(a._profile),!0);for(var b in a._accessTokensInfos)if(!c.equals(a._accessTokensInfos[b],this._accessTokensInfos[b])){var d=c.cloneObject(a._accessTokensInfos[b]);this._accessTokensInfos[b]=d,j(d.isReAuthentication).setItem(b,JSON.stringify(d)),this.validateSSOCookieLifetime(this._accessTokensInfos[b].access_token)}this._callCallbacksToUpdateUI(),a.isSignedInUser(!0)&&!this.isSignedInUser(!1)&&this.signInBasedOnSingleSignOnSSO()}},_attachHandlersToUI:function(){c.logToConsoleInDebugMode("No-op: use the susiButtons module to automatically attach listeners to buttons")},_openWindow:function(a,b){if(this.isModal()){var c=Math.min(b&&b.width||F.any.width,screen.availWidth),e=Math.min(b&&b.height||F.any.height,screen.availHeight),f=parseInt((screen.availLeft?screen.availLeft:0)+Math.max(0,screen.availWidth-c)/2),g=parseInt((screen.availTop?screen.availTop:0)+Math.max(0,screen.availHeight-e)/2),h=u(a,{width:c,height:e,left:f,top:g,toolbar:!1,menubar:!1,scrollable:!0,resizable:!0});h||this._onError({error:"popupBlocked",popupUrl:a})}else d.setHref(a,this.isMandatorySignIn());this.contextToBePassedOnRedirect=null},
isModal:function(){return!!this._isFinalRedirectPageInModalMode()||(this.adobeid.uses_modal_mode===!0&&this.adobeid.uses_redirect_mode===!0?(c.logErrorToConsoleInDebugMode("redirect mode and modal mode both enabled"),!0):"boolean"==typeof this.adobeid.uses_modal_mode?this.adobeid.uses_modal_mode:this.adobeid.uses_redirect_mode===!1)},_isFinalRedirectPageInModalMode:function(){return c.String_contains(d.getHref(),D)&&window.opener&&window.opener!==window},getAdobeIdApiParametersForApi:function(b){return a.getApiParameters(b)},getLocale:function(){return a.getLocale()},getReleaseFlags:function(b,d){return null!==N?void c.callIfFunction(b,null,[N,M]):void a.getReleaseFlags(this.getAccessToken(),function(a,d){M=d||null,N=a||null,c.callIfFunction(b,null,[a,d])},d)},isReleaseFlagActive:function(a){return!!M&&"1"===M[a]},sunbreakHack:function(a){return a.replace(i.sunbreakScope,i.sunbreakScopeExpanded)},matchesTheRequiredScope:function(a){if(c.assert(c.String_hasContent(a),"scopeToValidate must be a non empty string for matchesTheRequiredScope"))return!1;var b=this.sunbreakHack(c.String_withoutWhitespaces(a)).split(","),d=!0;return c.each(this.sunbreakHack(this.getScope()).split(","),function(a,e){if(!c.existsInArray(e,b))return d=!1,!1}),d},getScope:function(b,c){return a.getScope(b,c)},isKnownClientID:function(a){return a in i.api.authorize.endpoint},getClientID:function(b,c){return a.getClientId(b,c)},isMandatorySignIn:function(){return this.adobeid.is_mandatory_sign_in===!0&&this.isModal()?(c.logErrorToConsoleInDebugMode("is_mandatory_sign_in can be enabled only in redirect mode"),!1):"boolean"==typeof this.adobeid.is_mandatory_sign_in&&this.adobeid.is_mandatory_sign_in},isSingleLogOutEnabled:function(){return"boolean"==typeof this.adobeid.uses_single_log_out?this.adobeid.uses_single_log_out:i.sloEnabled},isRefreshSSOCookiesEnabled:function(){return"boolean"==typeof this.adobeid.uses_refresh_sso_cookies?this.adobeid.uses_refresh_sso_cookies:i.refreshSsoCookiesEnabled},_getRedirectUri:function(a,b){var e="",f=c.applyExtraApiParameters(this.getAdobeIdApiParametersForApi(a),b);if(this.isModal())e=c.getBasePath(d.getHref())+D+"#"+B;else{e=f.redirect_uri?f.redirect_uri:this.adobeid.redirect_uri?this.adobeid.redirect_uri:d.getHref(),c.assert(!c.String_contains(e,A),"the redirect_uri mustn't already contain #from_ims");var g=c.getHashFromURL(e),h=e;g&&(h=h.substring(0,h.length-g.length)),e=h+"#"+B+"&old_hash="+encodeURIComponent(g)}return f.client_id&&(e+="&client_id="+encodeURIComponent(f.client_id)),f.scope&&(e+="&scope="+encodeURIComponent(f.scope)),a&&a.name&&(e+="&api="+encodeURIComponent(a.name)),e=this.updateRedirectUriForReAuthentication(e,f),c.isEmptyObject(this.contextToBePassedOnRedirect)||(e+="&"+C+"="+encodeURIComponent(JSON.stringify(this.contextToBePassedOnRedirect))),e},_ajaxGet:function(a,b,d){var f=this,g=function(d,e){if(d){var g=c.cloneObject(f.errors.network);g.debug={url:a},f._onError(g)}else b.call(f,e)};"jsonp"!==d&&e.corsSupported?e.corsGet(a,null,null,g):e.jsonp(a,{},g)},_handleTheJQueryDependency:function(){},_initOnDependencyLoad:function(){var a=this;h.onLoad(function(b){a._initialize()})},_waitForDOMContentLoaded:function(){var a=this,b=!1,d=function(){b||(b=!0,a._initOnDependencyLoad())};"complete"===document.readyState||"loaded"===document.readyState?d.call():(c.addEventListener(document,"DOMContentLoaded",d),c.addEventListener(window,"load",d))}};return m.call(O),O},a.location=function(){"use strict";function a(){return window.location.href}function b(a,b){b?window.location.replace(a):window.location.href=a}function c(){return window.location.hash}function d(a){window.location.hash=a}return{getHref:a,setHref:b,getHash:c,setHash:d}},a.optimizations=function(b,c){"use strict";if(b=b||{},b.enable!==!1)for(var d in a.optimizations)a.optimizations.hasOwnProperty(d)&&"function"==typeof a.optimizations[d]&&a.optimizations[d].call(null,b,c)},a.optimizations.$$prefetchSuSi=function(a,b){"use strict";if(a.prefetchSuSi!==!1){var c=function(){if(!b.isSignedInUser()){var a=b.getUrlForApiCall(b.config.api.authorize,{client_id:b.getClientID()}),c=/^(https?:\/\/.+?)\//.exec(a)[1],d=c+"/favicon.ico?cache_bust="+Math.random().toString(16).slice(2),e=document.createElement("link");e.setAttribute("rel","prefetch"),e.setAttribute("href",d),document.getElementsByTagName("head")[0].appendChild(e)}};b.isReady()?c():b.addEventListener(b.Events.READY,c)}},a.storage=function(b){"use strict";function c(c){if(a.storage.$$isPolyfillNeeded(c,b)){var d=a.storage.$$polyfill(b);return new d}return window[c]}function d(){return c("sessionStorage")}function e(){return c("localStorage")}return{session:d(),local:e()}},a.storage.$$isPolyfillNeeded=function(a,b){"use strict";try{var c=window[a]}catch(c){return b.logToConsoleInDebugMode(a+" disabled"),!0}if(null===c||"undefined"==typeof c)return!0;try{return c.setItem("isStoragePolyfillNeeded",!0),"true"!==c.getItem("isStoragePolyfillNeeded")||(c.removeItem("isStoragePolyfillNeeded"),!1)}catch(a){return!0}},a.storage.$$polyfill=function(a){"use strict";var b=function(){var b={};return{length:0,clear:function(){b={},this.length=0},getItem:function(a){var c=b[a];return"undefined"==typeof c?null:c},keys:function(){return b},removeItem:function(c){b.hasOwnProperty(c)&&(a.removeKeyFromObject(b,c),--this.length)},setItem:function(a,c){b.hasOwnProperty(a)||++this.length,b[a]=String(c)}}};return b},a.susiButtons=function(a,b,c){"use strict";function d(a,c,d){var e=b.querySelectorAll(f.replace("%action%",a)),g=function(){c.call(d)};b.each(e,function(a,c){b.addEventListener(c,"click",g)})}function e(){var c=function(){g||(g=!0,d("signin",a.signIn,a),d("signup",a.signUp,a),d("signout",a.signOut,a),d("reauthenticate",a.reAuthenticate,a))};"complete"===window.document.readyState||"loaded"===window.document.readyState?c():(b.addEventListener(window.document,"DOMContentLoaded",c),b.addEventListener(window,"load",c))}var f='[data-adobeid-action="%action%"]',g=!1;return{attachListeners:e}},a.utils=function(a){"use strict";function b(a,b){for(var c=0;c<a.length&&b.call(a[c],c,a[c])!==!1;++c);}function c(a){return document.querySelector?document.querySelector(a):null}function d(a){return document.querySelectorAll?document.querySelectorAll(a):[]}function e(){var a=c('script[src*="imslib.min.js"]');return a||(a=c('script[src*="imslib.js"]')),a?a.src:""}function f(a){window.console&&"function"==typeof window.console.log&&window.console.log("imslib.js: "+a)}function g(a){K&&f(a)}function h(a){K&&window.console&&"function"==typeof window.console.error&&window.console.error("imslib.js: "+a)}function i(a,b,c){return b>0?a.substring(0,b)+c+a.substring(b,a.length):c+a}function j(a,b){var c,d=-1;do c=d,d=a.indexOf(b,d+1);while(d!==-1);return c}function k(a,b){return a.indexOf(b)!==-1}function l(a,b){return 0===a.indexOf(b)}function m(a){return"string"==typeof a&&a.length>0}function n(a){return a.replace(/\s/g,"")}function o(a,b){return a||h("assert: "+b),!a}function p(a){return a||(a=new Date),o(a instanceof Date,"Date_asMilliseconds: provided date is not a Date.")?0:Number(a)}function q(a){return a&&"function"==typeof a}function r(a,b,c){return q(a)?a.apply(b,c||[]):null}function s(a,b){try{delete a[b]}catch(c){a[b]=void 0}}function t(a,b){if(null===a)return null===b;if(null===b)return null===a;if(typeof a!=typeof b)return!1;if(a instanceof Array){if(!(b instanceof Array)||a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(!t(a[c],b[c]))return!1;return!0}if("object"==typeof a){var d;for(d in a)if(!(d in b&&t(a[d],b[d])))return!1;for(d in b)if(!(d in a))return!1;return!0}return a===b}function u(a){if(null===a)return null;if("object"!=typeof a)return a;var c;if(a instanceof Array)return c=[],b(a,function(a,b){c.push(u(b))}),o(t(a,c),"cloned object has failed for "+JSON.stringify(a)),c;c={};for(var d in a)c[d]=u(a[d]);return o(t(a,c),"cloned object has failed for "+JSON.stringify(a)),c}function v(a){return!a||t(a,{})}function w(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function x(){if(document.head)return document.head;var a=document.getElementsByTagName("head");return a&&a.length?a[0]:null}function y(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol.replace(":",""),host:b.host,query:b.search,hash:b.hash,path:b.pathname.slice(0,b.pathname.lastIndexOf("/")+1)}}function z(a){var b=y(a);return b.protocol+"://"+b.host+b.path}function A(b){!b&&a&&(b=a.getHref());var c=b.indexOf("#");return c!==-1?b.substring(c):""}function B(a){a=a.replace(/^(#|\?|&)/,"");var c={};return b(a.split("&"),function(a,b){if(b.length){var d=b.split("=");c[d[0]]=decodeURIComponent(d[1])}}),c}function C(a,b){for(var c=0;c<b.length;++c)if(t(b[c],a))return!0;return!1}function D(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function E(a){return JSON.parse(a)}function F(a){for(var b=u(a),c=1;c<arguments.length;++c){var d=arguments[c];if("object"==typeof d)for(var e in d){var f=d[e];"undefined"!=typeof f?"object"!=typeof f?b[e]=f:b[e]=F(b[e]||{},f):s(b,e)}}return b}function G(a,b,c){return window.open(a,b,c)}function H(){window.close()}function I(){var a=Math.random().toString(16);return a.slice(a.indexOf(".")+1)}var J=e(),K=J.match(/^http(s:\/\/ims-na1-(dev|qa)\d\.adobelogin\.com)|(s?:\/\/[\w-]+\.(corp|eur)\.adobe\.com)|(s:\/\/adobeid-na1-(dev|qa)\d\.services\.adobe\.com)/i);K&&(J&&f("loaded from "+J),f("isDebugMode"));var L={isDebugMode:K,logToConsole:f,logToConsoleInDebugMode:g,logErrorToConsoleInDebugMode:h,assert:o,each:b,existsInArray:C,String_insert:i,String_lastIndexOf:j,String_contains:k,String_startsWith:l,String_hasContent:m,String_withoutWhitespaces:n,parseUrl:y,getBasePath:z,getHashFromURL:A,getQueryParamsAsMap:B,Date_asMilliseconds:p,isFunction:q,callIfFunction:r,removeKeyFromObject:s,cloneObject:u,equals:t,isEmptyObject:v,Object_keys:w,getDocumentHead:x,addEventListener:D,parseJSON:E,applyExtraApiParameters:F,openPopup:G,closeWindow:H,getThisScriptSrc:e,createRandomString:I,querySelectorAll:d};return L},a.vendors=function(){"use strict";var b={},c={json:"https://static.adobelogin.com/renga-idprovider/resources/js/json2-min.js"},d=a.vendors.$$neededVendors(),e=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,"function"==typeof b&&(c.onload=function(){window.setTimeout(b,1)});var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(c)},f=function(a){e(c.json,a)},g=!1,h=[],i=function(){if(!d.isJSONNeeded||g)for(var a=h.shift();a;)a.call(null,b),a=h.shift()};return b.onLoad=function(a){h.push(a),window.setTimeout(i,0)},d.isJSONNeeded&&f(function(){g=!0,i()}),b},a.vendors.$$neededVendors=function(){"use strict";var a=function(){return!(window.JSON&&"function"==typeof window.JSON.stringify)}();return{isJSONNeeded:a}},a.bootstrap=function(){"use strict";var b=a.alertMessages(),c=a.vendors(),d=a.location(),e=a.utils(d),f=a.adobeid(e),g=a.storage(e),h=a.http(e),i=a.events(e),j=a.base32(e),k=a.config(e.parseJSON('{"services":"https://adobeid-na1.services.adobe.com/ims","login":"https://ims-na1.adobelogin.com/ims"}'),f,e),l=a.imsApis(h,e,f,k.api,j,k.client_id,k.locale);window.adobeIMS=a.adobeIMS(l,f,e,d,h,g,i,c,k),window.adobeIMS.version="1.7.1";var m=a.susiButtons(window.adobeIMS,e,c);a.optimizations(f.optimizations,window.adobeIMS);window.adobeIMS.config=k,window.adobeIMS.IMSAPIs=k.api,window.AdobeIMSStrings=b,window.adobeIMS._initOnDependencyLoad(),m.attachListeners()},a.bootstrap()}({});
//# sourceMappingURL=imslib.min.js.map